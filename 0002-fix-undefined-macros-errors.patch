From b887aa9f289236e4d6294e3da8a750cdcb9e5e74 Mon Sep 17 00:00:00 2001
From: usertam <heiyiutam@gmail.com>
Date: Sat, 22 Oct 2022 20:50:47 +0800
Subject: [PATCH 2/2] fix undefined macros errors

---
 tex/context/base/mkxl/math-ini.mkxl | 5 +++--
 tex/context/base/mkxl/syst-ini.mkxl | 3 +--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/tex/context/base/mkxl/math-ini.mkxl b/tex/context/base/mkxl/math-ini.mkxl
index c1beb07..fe8a172 100644
--- a/tex/context/base/mkxl/math-ini.mkxl
+++ b/tex/context/base/mkxl/math-ini.mkxl
@@ -109,7 +109,6 @@
    +\analyzescriptnucleuscharmathcontrolcode
    +\analyzescriptnucleuslistmathcontrolcode
    +\analyzescriptnucleusboxmathcontrolcode
-   +\accenttopskewwithoffsetmathcontrolcode
  % +\ignorekerndimensionsmathcontrolcode    % xits needs this (bad depth of fences)
 \relax
 
@@ -574,7 +573,6 @@
  % +\checkligatureclassoptioncode
    +\flattenclassoptioncode
    +\checkkernpairclassoptioncode
-   +\removeitaliccorrectionclassoptioncode
 \relax
 
 \setmathoptions\mathvariablecode\numexpr
@@ -1114,6 +1112,9 @@
 % \inherited\setmathspacing \mathtextpunctuationcode \mathordcode \allscriptstyles       \mathinterwordscriptskip
 % \inherited\setmathspacing \mathtextpunctuationcode \mathordcode \allscriptscriptstyles \mathinterwordscriptscriptskip
 
+\aliased\let\allunsplitstyles\allscriptstyles
+\aliased\let\allmainstyles\alltextstyles
+
 \startsetups math:spacing:presets
     \resetmathspacing
     %
diff --git a/tex/context/base/mkxl/syst-ini.mkxl b/tex/context/base/mkxl/syst-ini.mkxl
index 96bdde7..195dc45 100644
--- a/tex/context/base/mkxl/syst-ini.mkxl
+++ b/tex/context/base/mkxl/syst-ini.mkxl
@@ -990,8 +990,7 @@
 %D \ifzeropt \somedimen ... \else ... \fi
 %D \stoptyping
 
-\aliased\let\ifzeropt\ifzerodim % was \let\ifzeropt\ifcase
-\aliased\let\ifzero  \ifzeronum % was \let\ifzeropt\ifcase
+\aliased\let\ifzeropt\ifcase
 
 % these token list helpers might move to syst-aux.mkiv
 %
-- 
2.36.1

