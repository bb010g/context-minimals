% Copyright 2018-2023 by Romano Giannetti
% Copyright 2015-2023 by Stefan Lindner
% Copyright 2013-2023 by Stefan Erhardt
% Copyright 2007-2023 by Massimo Redaelli
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the files gpl-3.0_license.txt and lppl-1-3c_license.txt for more details.

% I have to use this to enable compilation on new context
% See https://github.com/pgf-tikz/pgf/issues/1248#issuecomment-1486235591
% I have no clue on how to fix this; moving the following line *inside*
% t-circuitikz.tex does not work
\usemodule[pgfrcs,pgfmat]
\usemodule[circuitikz]

\starttext

A simple example to test the installation.

% removed all the "pseudo-SI commands". They should work, but they
% stopped working when context passed from mkiv to ltmx (March 2023)
% I have no clue on what's going on.
\startcircuitikz[scale=1.2]
	\draw
  (0,2) to[I=1~mA] (2,2)
        to[R, l_=2~kΩ, *-*] (0,0)
        to[R, l_=2~kΩ] (2,0)
        to[V, v_=2~V] (2,2)
        to[cspst, l=$t_0$] (4,2) -- (4,1.5)
        to [generic, i=$i_1$, v=$v_1$] (4,-.5) -- (4,-1.5)
  (0,2) -- (0,-1.5) to[V, v_=4~V] (2,-1.5)
        to [R, l=1~kΩ] (4,-1.5)
  (5,2) node[dipchip, anchor=pin 1]{}
  (5,-2) node[flipflop JK, anchor=pin 1]{};

\stopcircuitikz

% \startcircuitikz[scale=1.2]
% 	\draw
%   (0,2) to[I=1\milli\ampere] (2,2)
%         to[R, l_=2\kilo\ohm, *-*] (0,0)
%         to[R, l_=2\kilo\ohm] (2,0)
%         to[V, v_=2\volt] (2,2)
%         to[cspst, l=$t_0$] (4,2) -- (4,1.5)
%         to [generic, i=$i_1$, v=$v_1$] (4,-.5) -- (4,-1.5)
%   (0,2) -- (0,-1.5) to[V, v_=4\volt] (2,-1.5)
%         to [R, l=1\kilo\ohm] (4,-1.5)
%   (5,2) node[dipchip, anchor=pin 1]{}
%   (5,-2) node[flipflop JK, anchor=pin 1]{};

% \stopcircuitikz

\stoptext
